<!doctype html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{_layout}">
<head>
  <title>List products</title>
</head>
<body>
<div layout:fragment="content">
  <div class="d-flex justify-content-between align-items-center">
    <h3>Products</h3>
    <a class="btn btn-primary" th:href="@{/products/create}">Create New Product</a>
  </div>

  <table class="table table-bordered mt-3">
    <thead>
    <tr>
      <th>#</th>
      <th>Name</th>
      <th>Price</th>
      <th>Image</th>
      <th>Category Name</th>
      <th>Actions</th>
    </tr>
    </thead>

    <tbody>
    <tr th:each="p : ${listProduct}">
      <td th:text="${p.id}"></td>
      <td th:text="${p.name}"></td>
      <td th:text="${p.price}"></td>
      <td>
        <img th:if="${p.image != null}" th:src="@{'/images/' + ${p.image}}"
             style="width:120px;height:80px;object-fit:cover" alt="Product image">
      </td>
      <td th:text="${p.category != null ? p.category.name : ''}"></td>
      <td class="d-flex gap-2">
        <a class="btn btn-sm btn-warning" th:href="@{/products/edit/{id}(id=${p.id})}">Edit</a>

        <form th:action="@{/products/delete/{id}(id=${p.id})}" method="post"
              onsubmit="return confirm('Delete this product?')">
          <button class="btn btn-sm btn-danger" type="submit">Delete</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>
</div>
</body>
</html>